<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>个人信息-农技培训平台-慧农移动在线</title>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1, maximum-scale=1, user-scalable=no">
	<meta http-equiv="X-UA-Compatible" content="ie=edge" />
	<meta name="format-detection" content="telephone=no" />
	<meta name="apple-mobile-web-app-capable" content="yes">
	<link rel="shortcut icon" type="img/x-icon" th:href="@{/img/favicon.ico}"/>
	<link rel="stylesheet" th:href="@{/font-awesome-4.7.0/css/font-awesome.css}" />
	<link rel="stylesheet" type="text/css" th:href="@{/ipcss/ipinfo.css}" />
	<script th:src="@{/JS/jquery.min.js}"></script>
	<script th:src="@{/ipjs/distpicker.js}"></script>
	<script th:src="@{/ipjs/ipperson.js}"></script>
	</head>
	<body style="background: #F0F8FF;">
		<form action="/UserManagementController/ModifyIpAvatar" method="post" enctype="multipart/form-data">
			<div class="header">
				<span style="padding-left: 4%;">
					<a th:href="@{/user/toipindex}" id="back-ipindex">
						<i class="iconfont">&#xe6b4;</i>
					</a>
				</span>
				<span style="margin-left: 34%;">个人资料</span>
				<span style="margin-right: 4%;float: right;">
					<input type="submit" value="保存" class="btn-keep"/>
				</span>
			</div>
			<ul>
				<li>
					<div class="all-photo" onclick="photoup()">
						<div class="all-photo-left">
							<span style="margin-top: 90%;display: block;">头像</span>
						</div>
						<div class="all-photo-right">
							<img th:src="'/Path/'+${user.headPortrait}" id="imgshow" style="width: 80px;height: 80px;border-radius: 100%;" />
						</div>
					</div>
					<input type="text" style="display: none" name="userId" th:value="${user.userId}">
					<input id="fileds" style="display: none;" name="file" type="file" accept="image/*" value="上传图片" />
					<input type="submit" th:value="上传" class="upload_img">
				<li>
					<span>昵称</span>
					<span style="float: right;margin-right: 4%;">
						<a th:href="@{/UserManagementController/toChangeNickname}">
							<i class="iconfont">&#xe65b;</i>
						</a>
					</span>
					<span style="float: right;margin-right: 2%;" th:text="${user.nickName}">在水一方</span>
				</li>
				<li>
					<span>性别</span>
					<span style="float: right;margin-right: 4%;">
						<a th:href="@{/UserManagementController/toChangeSex}">
							<i class="iconfont">&#xe65b;</i>
						</a>
					</span>
					<span style="float: right;margin-right: 2%;" th:text="${user.sex}">女</span>
				</li>
				<li>
					<span>所在地</span>
					<!--<span style="float: right;margin-right: 2%;">-->
						<!--<a th:href="@{/UserManagementController/toChangeAdress}">-->
							<!--<i class="iconfont">&#xe65b;</i>-->
						<!--</a>-->
					<!--</span>-->
					<span style="float: right;margin-right: 4%;" th:text="${user.address}"></span>
				</li>
				<li>
					<span>预留信息</span>
					<span style="float: right;margin-right: 4%;" th:text="${user.reservedInf}"></span>
				</li>
			</ul>
		</form>
	</body>
	<script>
		function photoup() {
			console.log('14212');
			$('#fileds').click();
			$('#fileds').change(function() {
				//获取input file的files文件数组;
				//$('#filed')获取的是jQuery对象，.get(0)转为原生对象;
				//这边默认只能选一个，但是存放形式仍然是数组，所以取第一个元素使用[0];
				var file = $('#fileds').get(0).files[0];
				//创建用来读取此文件的对象
				var reader = new FileReader();
				//使用该对象读取file文件
				reader.readAsDataURL(file);
				//读取文件成功后执行的方法函数
				reader.onload = function(e) {
					//读取成功后返回的一个参数e，整个的一个进度事件
					//选择所要显示图片的img，要赋值给img的src就是e中target下result里面
					//的base64编码格式的地址
					$('#imgshow').get(0).src = e.target.result;
				}
	})
}


	</script>
</html>
